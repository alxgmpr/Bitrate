
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Bitrate</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap core CSS -->
    <link href="/bootstrap.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="/mdb.css" rel="stylesheet">
    <!-- Your custom styles (optional) -->
    <link href="/style.css" rel="stylesheet">
    <link href="/homepageStyle.css" rel="stylesheet">
    <link href="/css/bootstrap-datepicker.css" rel = "stylesheet">

    <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }

    </style>
</head>

<body>

<nav class="navbar navbar-expand-lg navbar-dark myBlue">
    <a class="navbar-brand" href="#">
        <img src="luxury.png" height="30" class="d-inline-block align-top" alt="">
        BitRate</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
            aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
            </li>
        </ul>
    </div>
</nav>
<div id = "charts">
    <div class = "chartStyle">

        <canvas id="myChart"></canvas>
    </div>

    <div class = "chartStyle">

        <canvas id="myChartGoogle"></canvas>
    </div>
</div>

<div id = "dateWrapper">

    <div class = "dateStart">
        Start Date: <input id = "datepicker" type = "text" name = "date">
    </div>
    <div class = "dateEnd">
        End Date: <input id = "datepickerLower" type = "text" name = "date">
    </div>

    <div id="dropdown">
        <form >
            <select id = "coins" onChange = "getCoinValue(currentStartDate, currentEndDate)">
                <option value="BTC" selected = "selected">Bitcoin</option>
                <option value="BCH">Bitcoin-Cash</option>
                <option value="LTC">Litecoin</option>
                <option value="ETH">Ethereum</option>
                <option value="ADA">Cardano</option>
            </select>
        </form>
    </div>
</div>

<div id = "mainBlock">
    <div class = "newsBlock">
        <div id = "pad">
            <h7>WORLDS FASTEST</h7>
            <h4>Better Than Any Blockchain</h4>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse auctor ac ligula sed dapibus. Donec eget fermentum lorem. Mauris sit amet erat quis lacus placerat blandit ut feugiat purus. Aenean laoreet mauris sapien, non varius est commodo at. Phasellus sit amet varius purus, eget vehicula risus. Aenean ac varius eros. Donec a orci condimentum, imperdiet est eu, rutrum quam. Duis vel mi rutrum, varius diam quis, volutpat enim. Nullam euismod ornare hendrerit. Nunc consectetur commodo arcu, at faucibus enim euismod nec. Donec rutrum vitae massa sed rhoncus.</p>
            <p>In malesuada diam sem, nec dictum nisi molestie nec. Pellentesque maximus bibendum nunc, ut aliquet erat congue sed. Proin id tincidunt neque. Nam porttitor ipsum ante, eu scelerisque libero sodales vitae. Donec convallis vestibulum dui. Quisque convallis efficitur nisi ut tincidunt. Aenean lobortis eu ipsum ut venenatis.</p>
        </div>
        <div id = "imageBlock">
            <img id = "imageProps" src = "luxury.png">
        </div>
        <div id = "footer">
            <div id = "footerContentWrapper">
                <div id = "leftFooter">
                    <h6>BitRate</h6>
                    <h7>Â© BitRate 2018, All Rights Reserved.</h7>
                </div>
                <div id = "centerFooter">
                    <h6>Got questions? Ask us on our channels</h6>
                    <div id = "icons">
                        <i class="fa fa-twitter inlineIcons" aria-hidden="true"></i>
                        <i class="fa fa-facebook inlineIcons" aria-hidden="true"></i>
                        <i class="fa fa-google-plus inlineIcons" aria-hidden="true"></i>
                        <i class="fa fa-envelope inlineIcons" aria-hidden="true"></i>
                        <i class="fa fa-github inlineIcons" aria-hidden="true"></i>
                    </div>
                </div>
                <div id = "rightFooter">
                    <h6>Privacy Policy</h6>
                    <h7>Terms & Conditions</h7>
                </div>
            </div>
        </div>
    </div>
</div>
<div id = "newsLetter">
    <div id = "newsLetterWrapper">
        <h4>Interested In Weekly Updates? Try Our Newsletter!</h4>

        <div id = "searchSection">
            <!-- Search form -->
            <form id = "centerSearch" class="form-inline md-form form-sm active-cyan">
                <input class="form-control form-control-sm mr-3 w-75" type="text" placeholder="Email Address" aria-label="Search">
                <i class="fa fa-envelope-open" aria-hidden="true"></i>
            </form>
        </div>

        <h7>New to bitcoin? | What is Ethereum?</h7>
    </div>
</div>
<!-- SCRIPTS -->
<!-- JQuery -->
<script type="text/javascript" src="/jquery-3.2.1.min.js"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="/bootstrap.js"></script>
<!-- MDB core JavaScript -->
<script type="text/javascript" src="/mdb.js"></script>
<script type = "text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
<script type="text/javascript" src="/js/bootstrap-datepicker.js"></script>
<script>



    var currentStartDate = "2018-01-01";
    var currentEndDate = "2018-01-10";

    $( document ).ready(function() {
        $("#datepicker").datepicker({
            dateFormat: 'YYYY-MM-DD'}).on("changeDate", function (e) {
            currentStartDate = $(this).val();
            var split = currentStartDate.split("/");
            currentStartDate = split[2] + "-" + split[0] + "-" + split[1];
        });
        $("#datepickerLower").datepicker({
            dateFormat: 'YYYY-MM-DD'}).on("changeDate", function (e) {
            currentEndDate = $(this).val();
            var split = currentEndDate.split("/");
            currentEndDate = split[2] + "-" + split[0] + "-" + split[1];
            if(currentStartDate != "") {
                getCoinValue(currentStartDate, currentEndDate);
            }
        });

        getCoinValue(currentStartDate, currentEndDate);
    });

    function getCoinValue(startDate, endDate)
    {
        var selection = document.getElementById("coins");
        var coin = selection.options[selection.selectedIndex].value;
        console.log(coin);
        getDateValue(coin, startDate, endDate);
    }
    function getDateValue(currencyId, startDate, endDate){
        $.get("get_data_between", {startDate: startDate, endDate: endDate, currencyId: currencyId } )
            .done(function(data) {
                var object = JSON.parse(data);
                var dates = object.map(x => x.date);
                var usd = object.map(x => x.price_us_dollars);
                var tweets = object.map(x => x.twitter_mentions);
                var googleRatings = object.map(x => x.google_activity);
                createChart(currencyId, dates, usd, tweets);
                createChartGoogle(currencyId, dates, usd, googleRatings);
            });
    }

    function createChart(coin, dates, usd, tweets)
    {
        var canvas = document.getElementById('myChart');
        new Chart(canvas, {
            type: 'line',
            data: {
                labels: dates,
                datasets: [{
                    label: 'USDT',
                    borderColor: 'rgb(38, 12, 12)',
                    // backgroundColor: window.chartColors.red,
                    yAxisID: 'left-axis',
                    fill: false,
                    data: usd,
                }, {
                    label: '# of Tweets',
                    borderColor: 'rgb(77, 174, 206)',
                    // backgroundColor: window.chartColors.blue,
                    fill: false,
                    yAxisID: 'right-axis',
                    data: tweets,
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        scaleLabel: {
                            display: true,
                            labelString: "USDT"
                        },
                        id: 'left-axis',
                        type: 'linear',
                        position: 'left'
                    }, {
                        scaleLabel: {
                            display: true,
                            labelString: "# of Tweets"
                        },
                        id: 'right-axis',
                        type: 'linear',
                        position: 'right'
                    }],
                    xAxes: [{
                        scaleLabel: {
                            display: true,
                            labelString: "Dates"
                        }
                    }]
                }
            }
        });
    }

    function createChartGoogle(coin, dates, usd, googleRating)
    {
        var canvas = document.getElementById('myChartGoogle');
        new Chart(canvas, {
            type: 'line',
            data: {
                labels: dates,
                datasets: [{
                    label: 'USDT',
                    borderColor: 'rgb(38, 12, 12)',
                    // backgroundColor: window.chartColors.red,
                    yAxisID: 'left-axis',
                    fill: false,
                    data: usd,
                }, {
                    label: 'Google Rating',
                    borderColor: 'rgb(17, 111, 17)',
                    // backgroundColor: window.chartColors.blue,
                    fill: false,
                    yAxisID: 'right-axis',
                    data: googleRating,
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        scaleLabel: {
                            display: true,
                            labelString: "USDT"
                        },
                        id: 'left-axis',
                        type: 'linear',
                        position: 'left'
                    }, {
                        scaleLabel: {
                            display: true,
                            labelString: "Google Rating"
                        },
                        id: 'right-axis',
                        type: 'linear',
                        position: 'right'
                    }],
                    xAxes: [{
                        scaleLabel: {
                            display: true,
                            labelString: "Dates"
                        }
                    }]
                }
            }
        });
    }
</script>
</body>

</html>
